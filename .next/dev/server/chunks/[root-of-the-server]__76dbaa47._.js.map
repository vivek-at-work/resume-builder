{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/viveks/PycharmProjects/resume-builder/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\nimport { PrismaPg } from '@prisma/adapter-pg'\nimport { Pool } from 'pg'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nconst connectionString = process.env.DATABASE_URL\n\nif (!connectionString) {\n  throw new Error('DATABASE_URL environment variable is not set')\n}\n\nconst pool = new Pool({ connectionString })\nconst adapter = new PrismaPg(pool)\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    adapter,\n    log: process.env.NODE_ENV === 'development' ? ['error', 'warn'] : ['error'],\n  })\n\nif (process.env.NODE_ENV !== 'production') {\n  globalForPrisma.prisma = prisma\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,kBAAkB;AAIxB,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY;AAEjD,IAAI,CAAC,kBAAkB;IACrB,MAAM,IAAI,MAAM;AAClB;AAEA,MAAM,OAAO,IAAI,qJAAI,CAAC;IAAE;AAAiB;AACzC,MAAM,UAAU,IAAI,yKAAQ,CAAC;AAEtB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACf;IACA,KAAK,uCAAyC;QAAC;QAAS;KAAO,GAAG;AACpE;AAEF,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;AAC3B"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///Users/viveks/PycharmProjects/resume-builder/src/app/api/resumes/route.ts"],"sourcesContent":["import { auth, currentUser } from \"@clerk/nextjs/server\"\nimport { NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/prisma\"\n\n// GET all resumes for the current user\nexport async function GET() {\n  try {\n    const authResult = await auth()\n    const userId = authResult?.userId\n    \n    if (!userId) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const user = await currentUser()\n    if (!user) {\n      return NextResponse.json({ error: \"User not found\" }, { status: 404 })\n    }\n\n    // Find or create user in database\n    let dbUser = await prisma.user.findUnique({\n      where: { clerkId: userId },\n    })\n\n    if (!dbUser) {\n      dbUser = await prisma.user.create({\n        data: {\n          clerkId: userId,\n          email: user.emailAddresses[0]?.emailAddress || \"\",\n          firstName: user.firstName || null,\n          lastName: user.lastName || null,\n        },\n      })\n    }\n\n    const resumes = await prisma.resume.findMany({\n      where: { userId: dbUser.id },\n      orderBy: { updatedAt: \"desc\" },\n    })\n\n    // Parse JSON strings back to objects\n    const parsedResumes = resumes.map((resume) => ({\n      ...resume,\n      personalInfo: JSON.parse(resume.personalInfo),\n      workExperience: JSON.parse(resume.workExperience),\n      education: JSON.parse(resume.education),\n      skills: JSON.parse(resume.skills),\n    }))\n\n    return NextResponse.json(parsedResumes)\n  } catch (error) {\n    console.error(\"Error fetching resumes:\", error)\n    return NextResponse.json(\n      { error: \"Failed to fetch resumes\" },\n      { status: 500 }\n    )\n  }\n}\n\n// POST create a new resume\nexport async function POST(request: Request) {\n  try {\n    const authResult = await auth()\n    const userId = authResult?.userId\n    \n    if (!userId) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const user = await currentUser()\n    if (!user) {\n      return NextResponse.json({ error: \"User not found\" }, { status: 404 })\n    }\n\n    // Find or create user in database\n    let dbUser = await prisma.user.findUnique({\n      where: { clerkId: userId },\n    })\n\n    if (!dbUser) {\n      dbUser = await prisma.user.create({\n        data: {\n          clerkId: userId,\n          email: user.emailAddresses[0]?.emailAddress || \"\",\n          firstName: user.firstName || null,\n          lastName: user.lastName || null,\n        },\n      })\n    }\n\n    const body = await request.json()\n    const {\n      title,\n      layout,\n      isDraft,\n      personalInfo,\n      professionalSummary,\n      workExperience,\n      education,\n      skills,\n    } = body\n\n    const resume = await prisma.resume.create({\n      data: {\n        userId: dbUser.id,\n        title: title || \"Untitled Resume\",\n        layout: layout || \"layout1\",\n        isDraft: isDraft !== undefined ? isDraft : true,\n        personalInfo: JSON.stringify(personalInfo),\n        professionalSummary: professionalSummary || \"\",\n        workExperience: JSON.stringify(workExperience),\n        education: JSON.stringify(education),\n        skills: JSON.stringify(skills),\n      },\n    })\n\n    return NextResponse.json({\n      ...resume,\n      personalInfo: JSON.parse(resume.personalInfo),\n      workExperience: JSON.parse(resume.workExperience),\n      education: JSON.parse(resume.education),\n      skills: JSON.parse(resume.skills),\n    })\n  } catch (error) {\n    console.error(\"Error creating resume:\", error)\n    return NextResponse.json(\n      { error: \"Failed to create resume\" },\n      { status: 500 }\n    )\n  }\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AACA;;;;;;;;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,aAAa,MAAM,IAAA,6LAAI;QAC7B,MAAM,SAAS,YAAY;QAE3B,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,OAAO,MAAM,IAAA,2MAAW;QAC9B,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,kCAAkC;QAClC,IAAI,SAAS,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACxC,OAAO;gBAAE,SAAS;YAAO;QAC3B;QAEA,IAAI,CAAC,QAAQ;YACX,SAAS,MAAM,gIAAM,CAAC,IAAI,CAAC,MAAM,CAAC;gBAChC,MAAM;oBACJ,SAAS;oBACT,OAAO,KAAK,cAAc,CAAC,EAAE,EAAE,gBAAgB;oBAC/C,WAAW,KAAK,SAAS,IAAI;oBAC7B,UAAU,KAAK,QAAQ,IAAI;gBAC7B;YACF;QACF;QAEA,MAAM,UAAU,MAAM,gIAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;YAC3C,OAAO;gBAAE,QAAQ,OAAO,EAAE;YAAC;YAC3B,SAAS;gBAAE,WAAW;YAAO;QAC/B;QAEA,qCAAqC;QACrC,MAAM,gBAAgB,QAAQ,GAAG,CAAC,CAAC,SAAW,CAAC;gBAC7C,GAAG,MAAM;gBACT,cAAc,KAAK,KAAK,CAAC,OAAO,YAAY;gBAC5C,gBAAgB,KAAK,KAAK,CAAC,OAAO,cAAc;gBAChD,WAAW,KAAK,KAAK,CAAC,OAAO,SAAS;gBACtC,QAAQ,KAAK,KAAK,CAAC,OAAO,MAAM;YAClC,CAAC;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA0B,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,aAAa,MAAM,IAAA,6LAAI;QAC7B,MAAM,SAAS,YAAY;QAE3B,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,OAAO,MAAM,IAAA,2MAAW;QAC9B,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,kCAAkC;QAClC,IAAI,SAAS,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACxC,OAAO;gBAAE,SAAS;YAAO;QAC3B;QAEA,IAAI,CAAC,QAAQ;YACX,SAAS,MAAM,gIAAM,CAAC,IAAI,CAAC,MAAM,CAAC;gBAChC,MAAM;oBACJ,SAAS;oBACT,OAAO,KAAK,cAAc,CAAC,EAAE,EAAE,gBAAgB;oBAC/C,WAAW,KAAK,SAAS,IAAI;oBAC7B,UAAU,KAAK,QAAQ,IAAI;gBAC7B;YACF;QACF;QAEA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EACJ,KAAK,EACL,MAAM,EACN,OAAO,EACP,YAAY,EACZ,mBAAmB,EACnB,cAAc,EACd,SAAS,EACT,MAAM,EACP,GAAG;QAEJ,MAAM,SAAS,MAAM,gIAAM,CAAC,MAAM,CAAC,MAAM,CAAC;YACxC,MAAM;gBACJ,QAAQ,OAAO,EAAE;gBACjB,OAAO,SAAS;gBAChB,QAAQ,UAAU;gBAClB,SAAS,YAAY,YAAY,UAAU;gBAC3C,cAAc,KAAK,SAAS,CAAC;gBAC7B,qBAAqB,uBAAuB;gBAC5C,gBAAgB,KAAK,SAAS,CAAC;gBAC/B,WAAW,KAAK,SAAS,CAAC;gBAC1B,QAAQ,KAAK,SAAS,CAAC;YACzB;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,GAAG,MAAM;YACT,cAAc,KAAK,KAAK,CAAC,OAAO,YAAY;YAC5C,gBAAgB,KAAK,KAAK,CAAC,OAAO,cAAc;YAChD,WAAW,KAAK,KAAK,CAAC,OAAO,SAAS;YACtC,QAAQ,KAAK,KAAK,CAAC,OAAO,MAAM;QAClC;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA0B,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}
module.exports=[61419,e=>{"use strict";e.i(78417);var t=e.i(6776),r=e.i(15484);e.i(79640);var a=e.i(39184);e.i(10698),e.i(52119),e.i(1618),e.i(39345),e.i(87442),e.i(31112);var s=e.i(31293),n=e.i(62790),i=class{#e;#t=864e5;constructor(e){this.#e=e}isEventThrottled(e){let t=Date.now(),r=this.#r(e),a=this.#e.getItem(r);return!!a&&!(t-a>this.#t)||(this.#e.setItem(r,t),!1)}#r(e){let{sk:t,pk:r,payload:a,...s}=e,n={...a,...s};return JSON.stringify(Object.keys({...a,...s}).sort().map(e=>n[e]))}},l=class{#a="clerk_telemetry_throttler";getItem(e){return this.#s()[e]}setItem(e,t){try{let r=this.#s();r[e]=t,localStorage.setItem(this.#a,JSON.stringify(r))}catch(e){e instanceof DOMException&&("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&localStorage.length>0&&localStorage.removeItem(this.#a)}}removeItem(e){try{let t=this.#s();delete t[e],localStorage.setItem(this.#a,JSON.stringify(t))}catch{}}#s(){try{let e=localStorage.getItem(this.#a);if(!e)return{};return JSON.parse(e)}catch{return{}}}static isSupported(){return!1}},o=class{#e=new Map;#n=1e4;getItem(e){return this.#e.size>this.#n?void this.#e.clear():this.#e.get(e)}setItem(e,t){this.#e.set(e,t)}removeItem(e){this.#e.delete(e)}};let u=new Set(["error","warn","info","debug","trace"]);var d=class{#i;#l;#o={};#u=[];#d=null;constructor(e){this.#i={maxBufferSize:e.maxBufferSize??5,samplingRate:e.samplingRate??1,perEventSampling:e.perEventSampling??!0,disabled:e.disabled??!1,debug:e.debug??!1,endpoint:"https://clerk-telemetry.com"},e.clerkVersion?this.#o.clerkVersion=e.clerkVersion??"":this.#o.clerkVersion="",this.#o.sdk=e.sdk,this.#o.sdkVersion=e.sdkVersion,this.#o.publishableKey=e.publishableKey??"";const t=(0,s.parsePublishableKey)(e.publishableKey);t&&(this.#o.instanceType=t.instanceType),e.secretKey&&(this.#o.secretKey=e.secretKey.substring(0,16)),this.#l=new i(l.isSupported()?new l:new o)}get isEnabled(){return!("development"!==this.#o.instanceType||this.#i.disabled||"undefined"!=typeof process&&process.env&&(0,n.isTruthy)(process.env.CLERK_TELEMETRY_DISABLED))}get isDebug(){return this.#i.debug||"undefined"!=typeof process&&process.env&&(0,n.isTruthy)(process.env.CLERK_TELEMETRY_DEBUG)}record(e){try{let t=this.#c(e.event,e.payload);if(this.#p(t.event,t),!this.#h(t,e.eventSamplingRate))return;this.#u.push({kind:"event",value:t}),this.#m()}catch(e){console.error("[clerk/telemetry] Error recording telemetry event",e)}}recordLog(e){try{if(!this.#g(e))return;let t="string"==typeof e?.level&&u.has(e.level),r="string"==typeof e?.message&&e.message.trim().length>0,a=null,s=e?.timestamp;if("number"==typeof s||"string"==typeof s){let e=new Date(s);Number.isNaN(e.getTime())||(a=e)}if(!t||!r||null===a){this.isDebug&&"undefined"!=typeof console&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:t,messageIsValid:r,timestampIsValid:null!==a});return}let n=this.#y(),i={sdk:n.name,sdkv:n.version,cv:this.#o.clerkVersion??"",lvl:e.level,msg:e.message,ts:a.toISOString(),pk:this.#o.publishableKey||null,payload:this.#f(e.context)};this.#u.push({kind:"log",value:i}),this.#m()}catch(e){console.error("[clerk/telemetry] Error recording telemetry log entry",e)}}#h(e,t){return this.isEnabled&&!this.isDebug&&this.#v(e,t)}#g(e){return!0}#v(e,t){let r=Math.random();return!!(r<=this.#i.samplingRate&&(!1===this.#i.perEventSampling||void 0===t||r<=t))&&!this.#l.isEventThrottled(e)}#m(){this.#E()}#E(){let e=[...this.#u];if(this.#u=[],this.#d=null,0===e.length)return;let t=e.filter(e=>"event"===e.kind).map(e=>e.value),r=e.filter(e=>"log"===e.kind).map(e=>e.value);t.length>0&&fetch(new URL("/v1/event",this.#i.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:t})}).catch(()=>void 0),r.length>0&&fetch(new URL("/v1/logs",this.#i.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:r})}).catch(()=>void 0)}#p(e,t){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",e),console.log(t),console.groupEnd()):console.log("[clerk/telemetry]",e,t))}#y(){return{name:this.#o.sdk,version:this.#o.sdkVersion}}#c(e,t){let r=this.#y();return{event:e,cv:this.#o.clerkVersion??"",it:this.#o.instanceType??"",sdk:r.name,sdkv:r.version,...this.#o.publishableKey?{pk:this.#o.publishableKey}:{},...this.#o.secretKey?{sk:this.#o.secretKey}:{},payload:t}}#f(e){if(null==e||"object"!=typeof e)return null;try{let t=JSON.parse(JSON.stringify(e));if(t&&"object"==typeof t&&!Array.isArray(t))return t;return null}catch{return null}}};(0,a.withLegacyReturn)(t.verifyToken);var c=e.i(57594);let p={secretKey:c.SECRET_KEY,publishableKey:c.PUBLISHABLE_KEY,apiUrl:c.API_URL,apiVersion:c.API_VERSION,userAgent:"@clerk/nextjs@6.36.5",proxyUrl:c.PROXY_URL,domain:c.DOMAIN,isSatellite:c.IS_SATELLITE,machineSecretKey:c.MACHINE_SECRET_KEY,sdkMetadata:c.SDK_METADATA,telemetry:{disabled:c.TELEMETRY_DISABLED,debug:c.TELEMETRY_DEBUG}},h=e=>{let r,a,s,n;return r={...p,...e},a=(0,t.createBackendApiClient)(r),s=(0,t.createAuthenticateRequest)({options:r,apiClient:a}),n=new d({publishableKey:r.publishableKey,secretKey:r.secretKey,samplingRate:.1,...r.sdkMetadata?{sdk:r.sdkMetadata.name,sdkVersion:r.sdkMetadata.version}:{},...r.telemetry||{}}),{...a,...s,telemetry:n}};var m=e.i(73271);let g=new(e.i(78500)).AsyncLocalStorage;var y=e.i(13832);let f=async()=>{var e,a;let s;try{let e=await (0,r.buildRequestLike)(),a=(0,m.getHeader)(e,t.constants.Headers.ClerkRequestData);s=(0,y.decryptClerkRequestData)(a)}catch(e){if(e&&(0,r.isPrerenderingBailout)(e))throw e}let n=null!=(a=null==(e=g.getStore())?void 0:e.get("requestData"))?a:s;return(null==n?void 0:n.secretKey)||(null==n?void 0:n.publishableKey)?h(n):h({})};var v=e.i(7218);async function E(t){e.r(23502);let{userId:r}=await (0,v.auth)({treatPendingAsSignedOut:null==t?void 0:t.treatPendingAsSignedOut});return r?(await f()).users.getUser(r):null}e.s(["currentUser",()=>E],61419)},83235,e=>e.a(async(t,r)=>{try{var a=e.i(7218),s=e.i(61419),n=e.i(89171),i=e.i(98043),l=t([i]);async function o(){try{let e=await (0,a.auth)(),t=e?.userId;if(!t)return n.NextResponse.json({error:"Unauthorized"},{status:401});let r=await (0,s.currentUser)();if(!r)return n.NextResponse.json({error:"User not found"},{status:404});let l=await i.prisma.user.findUnique({where:{clerkId:t}});l||(l=await i.prisma.user.create({data:{clerkId:t,email:r.emailAddresses[0]?.emailAddress||"",firstName:r.firstName||null,lastName:r.lastName||null}}));let o=(await i.prisma.resume.findMany({where:{userId:l.id},orderBy:{updatedAt:"desc"}})).map(e=>({...e,personalInfo:JSON.parse(e.personalInfo),workExperience:JSON.parse(e.workExperience),education:JSON.parse(e.education),skills:JSON.parse(e.skills)}));return n.NextResponse.json(o)}catch(e){return console.error("Error fetching resumes:",e),n.NextResponse.json({error:"Failed to fetch resumes"},{status:500})}}async function u(e){try{let t=await (0,a.auth)(),r=t?.userId;if(!r)return n.NextResponse.json({error:"Unauthorized"},{status:401});let l=await (0,s.currentUser)();if(!l)return n.NextResponse.json({error:"User not found"},{status:404});let o=await i.prisma.user.findUnique({where:{clerkId:r}});o||(o=await i.prisma.user.create({data:{clerkId:r,email:l.emailAddresses[0]?.emailAddress||"",firstName:l.firstName||null,lastName:l.lastName||null}}));let{title:u,layout:d,isDraft:c,personalInfo:p,professionalSummary:h,workExperience:m,education:g,skills:y}=await e.json(),f=await i.prisma.resume.create({data:{userId:o.id,title:u||"Untitled Resume",layout:d||"layout1",isDraft:void 0===c||c,personalInfo:JSON.stringify(p),professionalSummary:h||"",workExperience:JSON.stringify(m),education:JSON.stringify(g),skills:JSON.stringify(y)}});return n.NextResponse.json({...f,personalInfo:JSON.parse(f.personalInfo),workExperience:JSON.parse(f.workExperience),education:JSON.parse(f.education),skills:JSON.parse(f.skills)})}catch(e){return console.error("Error creating resume:",e),n.NextResponse.json({error:"Failed to create resume"},{status:500})}}[i]=l.then?(await l)():l,e.s(["GET",()=>o,"POST",()=>u]),r()}catch(e){r(e)}},!1),75013,e=>e.a(async(t,r)=>{try{var a=e.i(47909),s=e.i(74017),n=e.i(96250),i=e.i(59756),l=e.i(61916),o=e.i(74677),u=e.i(69741),d=e.i(16795),c=e.i(87718),p=e.i(95169),h=e.i(47587),m=e.i(66012),g=e.i(70101),y=e.i(26937),f=e.i(10372),v=e.i(93695);e.i(52474);var E=e.i(220),R=e.i(83235),S=t([R]);[R]=S.then?(await S)():S;let b=new a.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/resumes/route",pathname:"/api/resumes",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/resumes/route.ts",nextConfigOutput:"",userland:R}),{workAsyncStorage:N,workUnitAsyncStorage:T,serverHooks:x}=b;function w(){return(0,n.patchFetch)({workAsyncStorage:N,workUnitAsyncStorage:T})}async function k(e,t,r){b.isDev&&(0,i.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/resumes/route";a=a.replace(/\/index$/,"")||"/";let n=await b.prepare(e,t,{srcPage:a,multiZoneDraftMode:!1});if(!n)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:R,params:S,nextConfig:w,parsedUrl:k,isDraftMode:N,prerenderManifest:T,routerServerContext:x,isOnDemandRevalidate:A,revalidateOnlyGenerated:O,resolvedPathname:C,clientReferenceManifest:I,serverActionsManifest:K}=n,_=(0,u.normalizeAppPath)(a),D=!!(T.dynamicRoutes[_]||T.routes[C]),U=async()=>((null==x?void 0:x.render404)?await x.render404(e,t,k,!1):t.end("This page could not be found"),null);if(D&&!N){let e=!!T.routes[C],t=T.dynamicRoutes[_];if(t&&!1===t.fallback&&!e){if(w.experimental.adapterPath)return await U();throw new v.NoFallbackError}}let P=null;!D||b.isDev||N||(P=C,P="/index"===P?"/":P);let M=!0===b.isDev||!D,L=D&&!M;K&&I&&(0,o.setManifestsSingleton)({page:a,clientReferenceManifest:I,serverActionsManifest:K});let j=e.method||"GET",H=(0,l.getTracer)(),q=H.getActiveScopeSpan(),J={params:S,prerenderManifest:T,renderOpts:{experimental:{authInterrupts:!!w.experimental.authInterrupts},cacheComponents:!!w.cacheComponents,supportsDynamicResponse:M,incrementalCache:(0,i.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:w.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a,s)=>b.onRequestError(e,t,a,s,x)},sharedContext:{buildId:R}},B=new d.NodeNextRequest(e),V=new d.NodeNextResponse(t),F=c.NextRequestAdapter.fromNodeNextRequest(B,(0,c.signalFromNodeResponse)(t));try{let n=async e=>b.handle(F,J).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=H.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=r.get("next.route");if(s){let t=`${j} ${s}`;e.setAttributes({"next.route":s,"http.route":s,"next.span_name":t}),e.updateName(t)}else e.updateName(`${j} ${a}`)}),o=!!(0,i.getRequestMeta)(e,"minimalMode"),u=async i=>{var l,u;let d=async({previousCacheEntry:s})=>{try{if(!o&&A&&O&&!s)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await n(i);e.fetchMetrics=J.renderOpts.fetchMetrics;let l=J.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let u=J.renderOpts.collectedTags;if(!D)return await (0,m.sendResponse)(B,V,a,J.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,g.toNodeOutgoingHttpHeaders)(a.headers);u&&(t[f.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==J.renderOpts.collectedRevalidate&&!(J.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&J.renderOpts.collectedRevalidate,s=void 0===J.renderOpts.collectedExpire||J.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:J.renderOpts.collectedExpire;return{value:{kind:E.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:s}}}}catch(t){throw(null==s?void 0:s.isStale)&&await b.onRequestError(e,t,{routerKind:"App Router",routePath:a,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:L,isOnDemandRevalidate:A})},!1,x),t}},c=await b.handleResponse({req:e,nextConfig:w,cacheKey:P,routeKind:s.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:T,isRoutePPREnabled:!1,isOnDemandRevalidate:A,revalidateOnlyGenerated:O,responseGenerator:d,waitUntil:r.waitUntil,isMinimalMode:o});if(!D)return null;if((null==c||null==(l=c.value)?void 0:l.kind)!==E.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(u=c.value)?void 0:u.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",A?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),N&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,g.fromNodeOutgoingHttpHeaders)(c.value.headers);return o&&D||p.delete(f.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,y.getCacheControlHeader)(c.cacheControl)),await (0,m.sendResponse)(B,V,new Response(c.value.body,{headers:p,status:c.value.status||200})),null};q?await u(q):await H.withPropagatedContext(e.headers,()=>H.trace(p.BaseServerSpan.handleRequest,{spanName:`${j} ${a}`,kind:l.SpanKind.SERVER,attributes:{"http.method":j,"http.target":e.url}},u))}catch(t){if(t instanceof v.NoFallbackError||await b.onRequestError(e,t,{routerKind:"App Router",routePath:_,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:L,isOnDemandRevalidate:A})},!1,x),D)throw t;return await (0,m.sendResponse)(B,V,new Response(null,{status:500})),null}}e.s(["handler",()=>k,"patchFetch",()=>w,"routeModule",()=>b,"serverHooks",()=>x,"workAsyncStorage",()=>N,"workUnitAsyncStorage",()=>T]),r()}catch(e){r(e)}},!1)];

//# sourceMappingURL=_d30d3564._.js.map